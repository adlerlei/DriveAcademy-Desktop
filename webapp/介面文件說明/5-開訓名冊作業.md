# 開發文件：開訓名冊作業

## 1. 總覽

此功能用於將已完成學照登錄的學員，正式編入特定期別的開訓名冊中。操作人員可為學員設定名冊相關資訊（如來源、手自排、教練），系統會自動生成「名冊號碼」，並可最終列印出監理站及駕訓班內部使用的兩種開訓名冊。

## 2. 功能區塊說明

### A. 學員查詢區

說明：此區塊的欄位用於查詢學員資料。輸入任一欄位資訊後，系統會自動查找並帶入學員的詳細資料。

- **欄位：學員編號**
  - UI 元件：文字輸入框
  - 資料來源：使用者輸入（用於查詢）

- **欄位：學員姓名**
  - UI 元件：文字輸入框
  - 資料來源：使用者輸入（用於查詢）

- **欄位：身分證號**
  - UI 元件：文字輸入框
  - 資料來源：使用者輸入（用於查詢）

### B. 學員資料顯示區（唯讀）

說明：查詢到學員後，其相關資料會顯示在此，此區塊的欄位為唯讀，不可編輯。

- 出生日期
- 學照日期
- 性別
- 梯次
- 訓練班別
- 戶籍地址（包含郵遞區號、縣市、詳細地址）

資料來源：所有資料皆來自「學員資料作業」中已建檔的學員資料庫。

### C. 名冊登錄區（可編輯/自動生成）

- **欄位：期別**
  - UI 元件：下拉選單
  - 說明：選擇學員要歸入的開訓期別。選擇後會觸發「名冊號碼」的自動生成。
  - 資料來源：抓取「年度期別計畫」中所有已建立的期別

- **欄位：名冊號碼**
  - UI 元件：文字輸入框
  - 說明：此欄位由系統自動生成，使用者不需填寫
  - 資料來源：自動生成。規則為：0 + 期別 + 梯次 + 三位數流水號

- **欄位：名冊梯次**
  - UI 元件：文字輸入框（唯讀）
  - 說明：自動帶入查詢到學員的「梯次」資料
  - 資料來源：學員資料庫

- **欄位：來源**
  - UI 元件：2個連動的下拉選單（代碼、名稱）
  - 固定資料：
    - 'A'：新考
    - 'B'：晉考
    - 'C'：換考
    - 'G'：吊扣註銷重考
    - 'Z'：臨時駕駛執照

- **欄位：手自排**
  - UI 元件：2個連動的下拉選單（代碼、名稱）
  - 固定資料：
    - 'M'：手排
    - 'A'：自排
    - 'S'：特製車

- **欄位：指導教練**
  - UI 元件：2個連動的下拉選單（編號、姓名）
  - 資料來源：從「教練資料作業」中已建檔的教練資料庫抓取

## 3. 功能按鈕

- **加入開訓名冊**
  - 功能：將目前設定的資訊更新至學員資料庫，並將該學員加入下方的開訓名冊清單中
  - 前置條件：必須先查詢到學員，且所有必填欄位（如期別、來源、手自排、教練）皆已選擇

- **匯出文件**
  - 功能：將下方開訓名冊清單中的所有學員資料，匯出成外部文件

- **列印開訓名冊（駕訓班用）**
  - 功能：產生一份供駕訓班內部公告使用的開訓名冊報表並觸發列印

- **列印開訓名冊（監理站用）**
  - 功能：產生一份符合監理站報備格式的官方開訓名冊報表並觸發列印

## 4. 開訓名冊清單

- **UI 元件**：表格（Data Grid / Table）
- **說明**：用於暫存本次操作中，所有已加入開訓名冊的學員
- **列表欄位**：
  - 名冊號碼
  - 梯次
  - 學員編號
  - 學員姓名
  - 來源
  - 手自排
  - 教練
  - 性別
  - 出生日期
  - 身分證號
  - 區號
  - 戶籍地址
  - 學照日期