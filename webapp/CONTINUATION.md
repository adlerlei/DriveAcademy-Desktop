# DriveAcademy Web App - 任務接續文件

> **用途**：此文件用於開新視窗時快速了解專案現況並接續工作

---

## 專案概況

| 項目 | 說明 |
|------|------|
| **專案目錄** | `/Users/jianyin/Documents/DriveAcademy-Desktop/webapp` |
| **Git 分支** | `feature/webapp-sveltekit` |
| **技術架構** | SvelteKit + Tailwind CSS + Cloudflare D1 |
| **文件目錄** | `webapp/介面文件說明/` (11 份頁面規格文件) |

---

## 🔴 當前優先任務：修正頁面欄位

目前的 webapp 頁面欄位與原始規格文件**有顯著差異**，需要根據 `介面文件說明/` 資料夾的文件修正每個頁面。

### 需修正的主要問題

每個頁面應該包含以下區塊（目前未實作）：
1. **學員查詢區** - 用於輸入查詢條件
2. **學員資料顯示區（唯讀）** - 顯示查詢到的學員詳細資料
3. **登錄區（可編輯）** - 操作人員填寫的欄位
4. **功能按鈕** - 各種操作按鈕
5. **資料列表** - 正確的欄位順序和內容

---

## 頁面修正清單

### 1. 年度期別計畫 (`/annual-plan`)
**規格文件**: `1-年度期別計畫.md`

| 類型 | 規格要求 | 目前狀態 |
|------|----------|----------|
| 輸入欄位 | 訓練班別(連動下拉)、梯次(下拉)、期別、年度、開訓日期、結訓日期 | ❌ 缺少連動下拉 |
| 自動生成 | 上課期別代碼 = 訓練班別代碼 + 0 + 期別 + 梯次 | ❌ 未實作 |
| 列表欄位 | 訓練班別名稱、年度、期別編號、開訓日期、結訓日期、上課期別代碼 | ⚠️ 順序不同 |

**固定資料**:
```
訓練班別: 1:普通小型車班, 2:大貨車班, 3:大客車班, 4:聯結車班, 5:職業小型車班, 6:普通重機車班, 7:大型重機車班, 8:小型車逕升大客車班
梯次: A, B
```

---

### 2. 學員資料作業 (`/students`)
**規格文件**: `2-學員資料作業.md`

| 類型 | 規格要求 | 目前狀態 |
|------|----------|----------|
| 查詢欄位 | 學員編號、學員姓名、身分證號、手機 | ⚠️ 部分實作 |
| 基本資料 | 訓練班別(連動)、考照類別(連動)、學員編號、梯次、姓名、身分證、出生日期、手機、戶籍地址(連動)、市話、性別、學歷、指導教練(連動)、信箱、備註、通訊地址 | ❌ 大量缺失 |
| 唯讀狀態 | 退訓、名冊號碼、學照日期、學照號碼、路試日期、建檔日期 | ❌ 未實作 |

**固定資料**:
```
考照類別: 0:自用小客車, 1:職業小客車, 2:自用大貨車, 3:職業大貨車, 4:自用大客車, 5:職業大客車, 6:自用聯結車, 7:職業聯結車
性別: 男, 女
學歷: 學前教育, 國小, 國中, 高中, 專科, 大學, 碩士, 博士
```

---

### 3. 學照統一送件 (`/licenses/submission`)
**規格文件**: `3-學照統一送件.md`

| 區塊 | 規格要求 | 目前狀態 |
|------|----------|----------|
| 查詢區 | 學員編號、學員姓名、身分證號、聯絡電話 | ❌ 未實作 |
| 顯示區(唯讀) | 出生日期、學員信箱、備註、戶籍地址 | ❌ 未實作 |
| 操作區 | 送件日期(必填) | ⚠️ 有日期欄位 |
| 列表欄位 | 身分證號、出生日期、學員姓名、區號、縣市區、戶籍地址、手機、E-mail | ❌ 欄位錯誤 |

---

### 4. 學照日期登錄 (`/licenses/registration`)
**規格文件**: `4-學照日期登錄.md`

| 區塊 | 規格要求 | 目前狀態 |
|------|----------|----------|
| 查詢區 | 學員編號、學員姓名、身分證號、聯絡手機 | ❌ 未實作 |
| 顯示區(唯讀) | 考照類別、出生日期、備註、戶籍地址 | ❌ 未實作 |
| 登錄區 | 登錄日期、學照日期(必填)、學照號碼(必填) | ❌ 未實作 |
| 列表欄位 | 學照日期、學照號碼、考照類別、學員編號、學員姓名、出生日期、身分證號、手機、區號、縣市區、戶籍地址 | ❌ 欄位錯誤 |

---

### 5. 開訓名冊作業 (`/rosters/opening`)
**規格文件**: `5-開訓名冊作業.md`

| 區塊 | 規格要求 | 目前狀態 |
|------|----------|----------|
| 查詢區 | 學員編號、學員姓名、身分證號 | ❌ 未實作 |
| 顯示區(唯讀) | 出生日期、學照日期、性別、梯次、訓練班別、戶籍地址 | ❌ 未實作 |
| 登錄區 | 期別(下拉)、名冊號碼(自動)、名冊梯次(唯讀)、來源(連動下拉)、手自排(連動下拉)、指導教練(連動下拉) | ❌ 未實作 |
| 列表欄位 | 名冊號碼、梯次、學員編號、學員姓名、來源、手自排、教練、性別、出生日期、身分證號、區號、戶籍地址、學照日期 | ❌ 欄位錯誤 |

**固定資料**:
```
來源: A:新考, B:晉考, C:換考, G:吊扣註銷重考, Z:臨時駕駛執照
手自排: M:手排, A:自排, S:特製車
```

---

### 6-11. 其他頁面
同樣需要根據對應的規格文件修正（M2補訓、結訓名冊、場考、道考、筆試、教練資料）。

---

## 已完成項目

- ✅ SvelteKit 專案初始化
- ✅ Tailwind CSS 配置
- ✅ Cloudflare adapter 設定
- ✅ 資料庫 schema (`drizzle/schema.sql`)
- ✅ 後端服務 (StudentService, InstructorService, AuthService)
- ✅ API 端點 (CRUD for students/instructors, auth)
- ✅ 基礎 UI 元件 (GlassCard, GlassButton, GlassInput, GlassTable, GlassModal, GlassSidebar)
- ✅ 側邊欄導覽
- ✅ 11 個頁面基礎結構（但欄位需修正）

---

## 待處理項目

1. **🔴 高優先級**：根據規格文件修正所有頁面的欄位
2. **🟡 中優先級**：樣式設計調整（用戶對目前樣式不滿意）
3. **🟢 低優先級**：
   - 連接實際 D1 資料庫
   - 資料遷移
   - Cloudflare 部署

---

## 快速指令

```bash
# 啟動開發伺服器
cd /Users/jianyin/Documents/DriveAcademy-Desktop/webapp && npm run dev

# 建構專案
npm run build

# 切換到正確分支
git checkout feature/webapp-sveltekit
```

---

## 相關文件路徑

| 文件 | 路徑 |
|------|------|
| 介面規格 | `webapp/介面文件說明/*.md` |
| 資料庫 schema | `webapp/drizzle/schema.sql` |
| UI 元件 | `webapp/src/lib/components/` |
| 後端服務 | `webapp/src/lib/server/` |
| API 路由 | `webapp/src/routes/api/` |
| 頁面 | `webapp/src/routes/(app)/` |
